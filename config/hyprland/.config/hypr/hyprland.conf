# -- variables -- {
$mod = SUPER

# programs
$browser = brave
$fileManager = thunar
$laucher = ~/.config/rofi/scripts/lauch.sh drun
$musicPlayer = spotify
$printScreen = grim -g "$(slurp)" - | wl-copy
$screenLock = hyprlock
$terminal = kitty

# workspaces
$ws1 = 1
$ws2 = 2
$ws3 = 3
$ws4 = 4
$ws5 = 5
$ws6 = 6
$ws7 = 7
$ws8 = 8
$ws9 = 9
$ws10 = 10
# -- variables -- }

# -- configs -- {
monitor= , preferred, auto, 1

env = XCURSOR_SIZE, 24
env = HYPRCURSOR_SIZE, 24
env = GTK_THEME, Tokyonight-Dark

input {
  # Us
  kb_layout = us
  # kb_variant = intl

  # Br
  # kb_layout = br
  # kb_model = abnt2

  follow_mouse = 1
  touchpad {
      natural_scroll = false
  }

  gestures {
    gesture = 2, pinchout, mod: $mod, close

    gesture = 3, horizontal, workspace

    gesture = 3, swipe, mod: $mod, move
    gesture = 3, swipe, mod: CTRL, resize

  }
}

ecosystem {
  enforce_permissions = 1
}

permission = /usr/(bin|local/bin)/grim, screencopy, allow
permission = /usr/(bin|local/bin)/hyprlock, screencopy, allow
permission = /usr/(lib|libexec|lib64)/xdg-desktop-portal-hyprland, screencopy, allow
# -- configs -- }

# -- Startup -- {
exec-once = nm-applet
exec-once = hyprpaper

# Idle management
exec-once = hypridle

# Internet tray
exec = nm-applet

# taskbar
exec-once = waybar

# Wayland portals (screen sharing)
exec-once = xdg-desktop-portal-hyprland
exec-once = xdg-desktop-portal
# -- Startup -- }

# -- Theme -- {
general {
  gaps_in = 5
  gaps_out = 15

  border_size = 2

  col.active_border = rgba(F7768FEE)
  col.inactive_border = rgba(7AA2F7EE)

  allow_tearing = true

  layout = dwindle
}

dwindle {
  pseudotile = true
  preserve_split = true
}

decoration {
  rounding = 10
  rounding_power = 2
}

animations {
  enabled = false,

  #        NAME,      X0,    Y0,   X1,   Y1
  bezier = linear,    1.00,  1.00, 1.00, 1.00
  bezier = bouncy,    0.70, -0.55, 0.27, 1.55
  bezier = slowSlide, 0.12,  0.00, 0.40, 0.00

  #           NAME,      ONOFF, SPEED, CURVE,     [STYLE]
  animation = border,        0

  animation = layers,        1,  3.00, bouncy,    slide
  animation = workspaces,    1,  3.50, slowSlide, slide

  animation = fade,          1,  3.00, linear
  animation = windows,       1,  5.00, bouncy,    slide
  animation = windowsIn,     1,  3.00, bouncy,    gnomed
  animation = windowsOut,    1,  3.00, slowSlide, slide
}

# Only shows gaps if there is more than one window
# workspace = w[tv1], gapsout:0, gapsin:0
# workspace = f[1], gapsout:0, gapsin:0
# windowrule {
#   name = windowrule-1
#   border_size = 0
#   rounding = 0
#   match:float = 0
#   match:workspace = w[tv1]
# }
# windowrule {
#   name = windowrule-2
#   border_size = 0
#   rounding = 0
#   match:float = 0
#   match:workspace = f[1]
# }


# Fix some dragging issues with XWayland
windowrule {
  name = windowrule-3
  no_focus = on
  match:class = ^$
  match:title = ^$
  match:xwayland = 1
  match:float = 1
  match:fullscreen = 0
  match:pin = 0
}
# -- Theme -- }

# -- Keybinds -- {
bind = $mod, B, exec, $browser
bind = $mod, E, exec, $fileManager
bind = $mod, Space, exec, $laucher
bind = $mod, S, exec, $musicPlayer
bind = $mod, Return, exec, $terminal
bind = , Print, exec, $printScreen
bind = $mod CTRL, l, exec, $screenLock

# common apps
bind = $mod, d, exec, discord
bind = $mod, n, exec, obsidian

# kill focused window
bind = $mod, Q, killactive,

# fullscreen focused window
bind = $mod, F, fullscreen,

# dragging (left mouse button)
bindm = $mod, mouse:272, movewindow

# toggle tiling / floating
bind = $mod Shift, Space, togglefloating,

# resizing (right mouse button)
bindm = $mod, mouse:273, resizewindow

# reload hyprland
bind = $mod Shift, r, exec, ~/.config/hypr/scripts/reload.sh

# toggle animations
bind = $mod, a, exec, ~/.config/hypr/scripts/toggle_animations.sh

# multimedia keys
bindel = , XF86AudioRaiseVolume, exec, pactl set-sink-volume @DEFAULT_SINK@ +10%
bindel = , XF86AudioLowerVolume, exec, pactl set-sink-volume @DEFAULT_SINK@ -10%
bindel = , XF86AudioMute, exec, pactl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindel = , XF86AudioMicMute, exec, pactl set-source-mute @DEFAULT_SOURCE@ toggle

bindel = , XF86MonBrightnessUp, exec, brightnessctl -e4 -n2 set 5%+
bindel = , XF86MonBrightnessDown, exec, brightnessctl -e4 -n2 set 5%-

# cycle audio output
bindel = $mod ALT, s, exec, ~/.dotfiles/scripts/cycle_sink.sh

# media player controls with arrow keys
bindl = $mod ALT, right, exec, playerctl --player=spotify next
bindl = $mod ALT, left, exec, playerctl --player=spotify previous
bindl = $mod ALT, up, exec, playerctl --player=spotify volume 0.1+
bindl = $mod ALT, down, exec, playerctl --player=spotify volume 0.1-

# media player controls with vim keys
bindl = $mod ALT, l, exec, playerctl --player=spotify next
bindl = $mod ALT, h, exec, playerctl --player=spotify previous
bindl = $mod ALT, k, exec, playerctl --player=spotify volume 0.1+
bindl = $mod ALT, j, exec, playerctl --player=spotify volume 0.1-

# play/pause
bindl = $mod ALT, Space, exec, playerctl --player=spotify play-pause

# change focus using arrow keys
bind = $mod, left, movefocus, l
bind = $mod, right, movefocus, r
bind = $mod, up, movefocus, u
bind = $mod, down, movefocus, d

# change focus using vim keys
bind = $mod, h, movefocus, l
bind = $mod, l, movefocus, r
bind = $mod, k, movefocus, u
bind = $mod, j, movefocus, d

# move focused window using arrow keys
bind = $mod SHIFT, left, movewindow, l
bind = $mod SHIFT, right, movewindow, r
bind = $mod SHIFT, up, movewindow, u
bind = $mod SHIFT, down, movewindow, d

# move focused window using vim keys
bind = $mod SHIFT, h, movewindow, l
bind = $mod SHIFT, l, movewindow, r
bind = $mod SHIFT, k, movewindow, u
bind = $mod SHIFT, j, movewindow, d

# switch to workspace
bind = $mod, 1, workspace, $ws1
bind = $mod, 2, workspace, $ws2
bind = $mod, 3, workspace, $ws3
bind = $mod, 4, workspace, $ws4
bind = $mod, 5, workspace, $ws5
bind = $mod, 6, workspace, $ws6
bind = $mod, 7, workspace, $ws7
bind = $mod, 8, workspace, $ws8
bind = $mod, 9, workspace, $ws9
bind = $mod, 0, workspace, $ws10

# move focused window to workspace
bind = $mod SHIFT, 1, movetoworkspacesilent, $ws1
bind = $mod SHIFT, 2, movetoworkspacesilent, $ws2
bind = $mod SHIFT, 3, movetoworkspacesilent, $ws3
bind = $mod SHIFT, 4, movetoworkspacesilent, $ws4
bind = $mod SHIFT, 5, movetoworkspacesilent, $ws5
bind = $mod SHIFT, 6, movetoworkspacesilent, $ws6
bind = $mod SHIFT, 7, movetoworkspacesilent, $ws7
bind = $mod SHIFT, 8, movetoworkspacesilent, $ws8
bind = $mod SHIFT, 9, movetoworkspacesilent, $ws9
bind = $mod SHIFT, 0, movetoworkspacesilent, $ws10
# -- Keybinds -- }
